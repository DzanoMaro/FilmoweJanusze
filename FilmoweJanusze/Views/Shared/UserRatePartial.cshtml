@model FilmoweJanusze.Models.UserRate

@{
    string formAction = "";
    string submitCaption = "";

    if (Model.User == null)
    {
        formAction = "Create";
        submitCaption = "Zapisz";
    }
    else
    {
        formAction = "Edit";
        submitCaption = "Zmień";
    }
}

<!-- OCENA FILMU -->
@if (ViewBag.MovieRate > 0 && ViewBag.MovieRate != null)
{
    <div>
        <h4>
            Ocena filmu:
            @ViewBag.MovieRate <span class="glyphicon glyphicon-star"></span> / 6 <span class="glyphicon glyphicon-star"></span>
        </h4>
    </div>
}
else
{
    <div>
        <h4>
            Jeszcze nikt nie ocenił tego filmu!
            Bądź pierwszy!
        </h4>
    </div>
}

<!-- FORMULARZ -->
@if (!String.IsNullOrEmpty(ViewBag.UserID) && (User.IsInRole("User") || User.IsInRole("Admin")))
{

    <div>
        @using (Html.BeginForm(formAction, "UserRate", FormMethod.Post, new { @class = "form-horizontal" }))
        {
            @Html.AntiForgeryToken()
            @Html.ValidationSummary(true, "", new { @class = "text-danger" })

            @Html.HiddenFor(ur => ur.UserRateID)
            @Html.HiddenFor(ur => ur.MovieID)
            @Html.HiddenFor(ur => ur.User.Id, new { Value = ViewBag.UserID })

            <div>
                @Html.LabelFor(ur => ur.Rate)
                @Html.DropDownList("Rate", Enumerable.Range(1, 6).Select(i => new SelectListItem { Text = i.ToString(), Value = i.ToString() }), "Brak oceny")
            </div>

            <div>
                @Html.EditorFor(ur => ur.Comment, new { htmlAttributes = new { placeholder = "Twój komentarz", @class = "form-control" } })
            </div>

            <input type="submit" value=@submitCaption class="btn btn-default" />

        }
    </div>
}
else 
{
    <div id="NotLoggedIn">
        <h4>
            @if(String.IsNullOrEmpty(ViewBag.UserID))
            { 
                @:Zaloguj sie,
            }
            else
            {
                @:Dokończ rejestrację konta,
            }
            by móc oceniać i komentować filmy!
        </h4>
    </div>
}